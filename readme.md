# Nixarkye's Dotfiles

This repository contains my personal dotfiles. They are managed by [Home Manager](https://github.com/nix-community/home-manager) and [Nix Flakes](https://nixos.wiki/wiki/Flakes).

## Structure

- `cachix/`: Contains configuration for [Cachix](https://cachix.org/), a binary cache for Nix.
- `home-manager/`: Contains configuration for Home Manager.
- `scripts/`: Contains various utility scripts.
- `configuration.nix`: The main configuration file for my NixOS system.
- `flake.nix`: The main Flake file for my NixOS system and Home-Manager.
- `Generations`:
  - `generation`: Contains information about the current NixOS generation.
  - `home-generation`: Contains information about the current Home Manager generation.
- `hardware-configuration.nix`: Generated by NixOS to describe the hardware of the system.

## Nix Flake Check Workflow

This GitHub Actions workflow is responsible for two main tasks:

1. **Checking the Nix flake inputs**: This is done every time a pull request is opened or a push is made to the `trunk` branch. The workflow checks out the repository, then uses the [Nix Flake Checker Action](https://github.com/DeterminateSystems/flake-checker-action) to verify the `flake.lock` file. It checks if the root Nixpkgs input is less than 30 days old, if it has the NixOS GitHub organization as its owner, and if it's from a supported Git branch. If any of these checks fail, the workflow will fail as well.

2. **Merging the `DevelopmentTrunk` branch into `trunk`**: This is done once a day at midnight. The workflow checks out the `trunk` branch, configures Git, fetches the `DevelopmentTrunk` branch, merges it into `trunk`, and pushes the changes back to GitHub. This ensures that any changes made in the `DevelopmentTrunk` branch are regularly merged into `trunk`.

## Setup

To use these dotfiles, clone the repository and use the `home-manager` command to switch to the new configuration:

```sh
git clone https://github.com/ARKye03/Xe_NixOS.git ~/.dotfiles
```

Link files to /etc/nixos/:

```sh
sudo ln -s ~/.dotfiles/configuration.nix /etc/nixos/configuration.nix
sudo ln -s ~/.dotfiles/flake.nix /etc/nixos/flake.nix
```

```sh
ln -s ~/.dotfiles/home-manager/ ~/.config/home-manager/
```

```sh
nix flake update ~/.dotfiles/
nix flake update ~/.dotfiles/home-manager/
sudo nixos-rebuild switch
home-manager switch
```

## Contributing

If you have any suggestions or improvements, feel free to open an issue or a pull request, after all, sharing is caring!

## Credits

- [NixOS Wiki](https://nixos.wiki)
- [Home Manager](https://github.com/nix-community/home-manager)
